Prj3: Exercises in Concurrency and Synchronization

- Harshil Kotamreddy, Tim Ellis, Lynne Tien

Objectives
Learn to:
- Design and implement a server that provides basic disk-like secondary storage and a basic file system
- Evaluate the performance of the server you implemented for various size of request caches
- Study and learn to use the socket API. Sockets will be used to provide the communication mechanism between (i) the client processes and the file system, and (ii) the file system and the disk storage server.

Instructions and Summary:

- First run Makefile (type 'make' into terminal)

1. Basic client-server:
This set of programs implements a client and a server. The client sends a string to the server which then reverses the string and sends it back to the client. 

Instructions:
in terminal
type './Server' into terminal and press <enter>.
in another terminal
type './Client' into terminal and press <enter>.

Type in the string to be reversed into the client and the client will print out the reversed string returned by the server.

** The user needs to press 'cntrl c' to exit the server. **
** The user can exit the client by typing 'exit' **

2. Directory listing server:
This set of programs also implements a client and a server. The server runs the commands typed into the client (using exec calls) and returns the output back to the client. 

Instructions:
in terminal
type './DirServer' into terminal and press <enter>.
in another terminal
type './DirClient' into terminal and press <enter>.

Type in a command such as 'ls' into the client and the client will print out the output returned by the server.

** The user needs to press 'cntrl c' to exit the server. **
** The user can exit the client by typing 'exit' **

3. Basic disk-storage system:
This set of programs also implements a client and a server. The server simulates a disk storage system and the client allows the user to query commands to the disk server. 

Instructions:
in terminal
type './DiskServer <number of cylinders> <number of sectors> <track time in microseconds>' into terminal and press <enter>.
e.x. './DiskServer 10 10 300' starts a server with 10 cylinders, 10 sectors, and 300 microseconds track time.
in another terminal
type './DiskClient' into terminal and press <enter>.

Type commands into the client and the client will print out the output returned by the server.
The following commands are valid:
- I: information request. The disk returns two integers representing the disk geometry: the number of cylinders, and the number of sectors per cylinder.
- R c s: read request for the contents of cylinder c sector s. The disk returns ’1’ followed by those 128 bytes of information, or ’0’ if no such block exists. 
- W c s l data: write request for cylinder c sector s. l is the number of bytes being provided, with a maximum of 128. The data is those l bytes of data. The disk returns ’1’ to the client if it is a valid write request (legal values of c, s and l), or returns a ’0’ otherwise. 

** The user needs to press 'cntrl c' to exit the server. **
** The user can exit the client by typing 'exit' **

4. File system server:
This set of programs extends the functionality of the previous set of programs and allows for the management of files on the server. 

Instructions:
in terminal
type './FileServer <number of cylinders> <number of sectors> <track time in microseconds>' into terminal and press <enter>.
e.x. './FileServer 10 10 300' starts a server with 10 cylinders, 10 sectors, and 300 microseconds track time.
in another terminal
type './FileClient' into terminal and press <enter>.

Type commands into the client and the client will print out the output returned by the server.
The following commands are valid:
- I: information request. The disk returns two integers representing the disk geometry: the number of cylinders,
and the number of sectors per cylinder.
- R c s: read request for the contents of cylinder c sector s. The disk returns ’1’ followed by those 128 bytes of
information, or ’0’ if no such block exists. 
- W c s l data: write request for cylinder c sector s. l is the number of bytes being provided, with a maximum of 128. The data is those l bytes of data. The disk returns ’1’ to the client if it is a valid write request (legal values of c, s and l), or returns a ’0’ otherwise.
- F: format. Will format the filesystem on the disk.
- C f: create file. This will create a file named f in the filesystem. Possible return codes: 0 = successfully created the file; 1 = a file of this name already existed; 2 = some other failure (such as no space left, etc.).
- D f: delete file. This will delete the file named f from the filesystem. Possible return codes: 0 = successfully deleted the file; 1 = a file of this name did not exist; 2 = some other failure.
- L b: directory listing. This will return a listing of the files in the filesystems. b is a boolean flag: if ’0’ it lists just the names of all the files, one per line; if ’1’ it includes the file lengths.
- R f: read file. This will read the entire contents of the file named f, and return the data that came from it. The message sent back to the client is, in order: a return code, the number of bytes in the file (in ASCII), a whitespace, and finally the data from the file. Possible return codes: 0 = successfully read file; 1 = no such filename exists; 2 = some other failure.
- W f l data: write file. This will overwrite the contents of the file named f with the l bytes of data. A return code is sent back to the client. Possible return codes: 0 = successfully written file; 1 = no such filename exists; 2 = some other failure (such as no space left, etc.).


** The user needs to press 'cntrl c' to exit the server. **
** The user can exit the client by typing 'exit' **

5. Directory structure:
This set of programs extends the functionality of the previous set of programs and allows for the management of directories. 

Instructions:
in terminal
type './DirectoryServer <number of cylinders> <number of sectors> <track time in microseconds>' into terminal and press <enter>.
e.x. './DirectoryServer 10 10 300' starts a server with 10 cylinders, 10 sectors, and 300 microseconds track time.
in another terminal
type './DirectoryClient' into terminal and press <enter>.

Type commands into the client and the client will print out the output returned by the server.
The following commands are valid:
- I: information request. The disk returns two integers representing the disk geometry: the number of cylinders,
and the number of sectors per cylinder.
- R c s: read request for the contents of cylinder c sector s. The disk returns ’1’ followed by those 128 bytes of
information, or ’0’ if no such block exists. 
- W c s l data: write request for cylinder c sector s. l is the number of bytes being provided, with a maximum of 128. The data is those l bytes of data. The disk returns ’1’ to the client if it is a valid write request (legal values of c, s and l), or returns a ’0’ otherwise.
- F: format. Will format the filesystem on the disk.
- C f: create file. This will create a file named f in the filesystem. Possible return codes: 0 = successfully created the file; 1 = a file of this name already existed; 2 = some other failure (such as no space left, etc.).
- D f: delete file. This will delete the file named f from the filesystem. Possible return codes: 0 = successfully deleted the file; 1 = a file of this name did not exist; 2 = some other failure.
- L b: directory listing. This will return a listing of the files and directories in the filesystems. b is a boolean flag: if ’0’ it lists just the names of all the files, one per line; if ’1’ it includes the file lengths.
- R f: read file. This will read the entire contents of the file named f, and return the data that came from it. The message sent back to the client is, in order: a return code, the number of bytes in the file (in ASCII), a whitespace, and finally the data from the file. Possible return codes: 0 = successfully read file; 1 = no such filename exists; 2 = some other failure.
- W f l data: write file. This will overwrite the contents of the file named f with the l bytes of data. A return code is sent back to the client. Possible return codes: 0 = successfully written file; 1 = no such filename exists; 2 = some other failure (such as no space left, etc.).
- mkdir dirname : create a directory of name dirname.
- cd dirname : change current working directory to dirname
- pwd : print the working directory name.
- rmdir dirname: remove the directory given.

** The user needs to press 'cntrl c' to exit the server. **
** The user can exit the client by typing 'exit' **